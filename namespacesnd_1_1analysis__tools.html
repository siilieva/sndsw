<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SND@LHC Software: snd::analysis_tools Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">SND@LHC Software
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('namespacesnd_1_1analysis__tools.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">snd::analysis_tools Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4366cddb81edce8fb50a4dedd3875e84" id="r_a4366cddb81edce8fb50a4dedd3875e84"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesnd_1_1analysis__tools.html#a4366cddb81edce8fb50a4dedd3875e84">getSciFiHitsPerStation</a> (const TClonesArray *digiHits, std::vector&lt; int &gt; &amp;horizontal_hits, std::vector&lt; int &gt; &amp;vertical_hits)</td></tr>
<tr class="separator:a4366cddb81edce8fb50a4dedd3875e84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add38a36ae42dce4c3e48621c2c4d0b23" id="r_add38a36ae42dce4c3e48621c2c4d0b23"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesnd_1_1analysis__tools.html#add38a36ae42dce4c3e48621c2c4d0b23">getTotalSciFiHits</a> (std::vector&lt; int &gt; &amp;horizontal_hits, std::vector&lt; int &gt; &amp;vertical_hits)</td></tr>
<tr class="separator:add38a36ae42dce4c3e48621c2c4d0b23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2e65a7ac6bc899bf97748cab9c03da6" id="r_ab2e65a7ac6bc899bf97748cab9c03da6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesnd_1_1analysis__tools.html#ab2e65a7ac6bc899bf97748cab9c03da6">getTotalSciFiHits</a> (const TClonesArray *digiHits)</td></tr>
<tr class="separator:ab2e65a7ac6bc899bf97748cab9c03da6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab110e213c86b26c581a9c7456a140ebc" id="r_ab110e213c86b26c581a9c7456a140ebc"><td class="memItemLeft" align="right" valign="top">std::vector&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesnd_1_1analysis__tools.html#ab110e213c86b26c581a9c7456a140ebc">getFractionalHitsPerScifiPlane</a> (std::vector&lt; int &gt; &amp;horizontal_hits, std::vector&lt; int &gt; &amp;vertical_hits)</td></tr>
<tr class="separator:ab110e213c86b26c581a9c7456a140ebc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb1bd3e6aa09e4d65a9c92a5133a8ac9" id="r_adb1bd3e6aa09e4d65a9c92a5133a8ac9"><td class="memItemLeft" align="right" valign="top">std::vector&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesnd_1_1analysis__tools.html#adb1bd3e6aa09e4d65a9c92a5133a8ac9">getFractionalHitsPerScifiPlane</a> (const TClonesArray *digiHits)</td></tr>
<tr class="separator:adb1bd3e6aa09e4d65a9c92a5133a8ac9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cfa1e0acecf53005048a0b11c125b57" id="r_a1cfa1e0acecf53005048a0b11c125b57"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesnd_1_1analysis__tools.html#a1cfa1e0acecf53005048a0b11c125b57">findScifiStation</a> (std::vector&lt; int &gt; &amp;horizontal_hits, std::vector&lt; int &gt; &amp;vertical_hits, float threshold)</td></tr>
<tr class="separator:a1cfa1e0acecf53005048a0b11c125b57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf671a252762c6da49f48a7e6cc31431" id="r_aaf671a252762c6da49f48a7e6cc31431"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesnd_1_1analysis__tools.html#aaf671a252762c6da49f48a7e6cc31431">findScifiStation</a> (const TClonesArray *digiHits, float threshold)</td></tr>
<tr class="separator:aaf671a252762c6da49f48a7e6cc31431"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5159d7eeb2993eba4f46fcd69f625612" id="r_a5159d7eeb2993eba4f46fcd69f625612"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesnd_1_1analysis__tools.html#a5159d7eeb2993eba4f46fcd69f625612">peakScifiTiming</a> (const TClonesArray &amp;digiHits, int bins, float min_x, float max_x)</td></tr>
<tr class="separator:a5159d7eeb2993eba4f46fcd69f625612"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a898b9cbb7bac8c95c59069b6aecbe9b3" id="r_a898b9cbb7bac8c95c59069b6aecbe9b3"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; TClonesArray &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesnd_1_1analysis__tools.html#a898b9cbb7bac8c95c59069b6aecbe9b3">getScifiHits</a> (const TClonesArray &amp;digiHits, int station, bool orientation)</td></tr>
<tr class="separator:a898b9cbb7bac8c95c59069b6aecbe9b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb14e67896089cd76dae5e5131de402e" id="r_aeb14e67896089cd76dae5e5131de402e"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; TClonesArray &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesnd_1_1analysis__tools.html#aeb14e67896089cd76dae5e5131de402e">selectScifiHits</a> (const TClonesArray &amp;digiHits, int station, bool orientation, int bins_x=52, float min_x=0.0, float max_x=26.0, float time_lower_range=1E9/(2 *ShipUnit::snd_freq), float time_upper_range=2E9/(ShipUnit::snd_freq/ShipUnit::hertz), bool make_selection=true)</td></tr>
<tr class="separator:aeb14e67896089cd76dae5e5131de402e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeca7f1eae2a9e2ff5c2aabf1319c954a" id="r_aeca7f1eae2a9e2ff5c2aabf1319c954a"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; TClonesArray &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesnd_1_1analysis__tools.html#aeca7f1eae2a9e2ff5c2aabf1319c954a">selectScifiHits</a> (const TClonesArray &amp;digiHits, int station, bool orientation, const std::map&lt; std::string, float &gt; &amp;selection_parameters, bool make_selection=true)</td></tr>
<tr class="separator:aeca7f1eae2a9e2ff5c2aabf1319c954a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78c74efd98070d9f53be87caa79640bb" id="r_a78c74efd98070d9f53be87caa79640bb"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; TClonesArray &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesnd_1_1analysis__tools.html#a78c74efd98070d9f53be87caa79640bb">filterScifiHits</a> (const TClonesArray &amp;digiHits, const std::map&lt; std::string, float &gt; &amp;selection_parameters, int method=0, std::string setup=&quot;TI18&quot;)</td></tr>
<tr class="separator:a78c74efd98070d9f53be87caa79640bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a0743bec57ce3c0441563fab456f415" id="r_a2a0743bec57ce3c0441563fab456f415"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; TClonesArray &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesnd_1_1analysis__tools.html#a2a0743bec57ce3c0441563fab456f415">filterScifiHits</a> (const TClonesArray &amp;digiHits, int method=0, std::string setup=&quot;TI18&quot;)</td></tr>
<tr class="separator:a2a0743bec57ce3c0441563fab456f415"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a072fe05f5196e2d1f0baf54ac8c62793" id="r_a072fe05f5196e2d1f0baf54ac8c62793"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesnd_1_1analysis__tools.html#a072fe05f5196e2d1f0baf54ac8c62793">calculateSiPMNumber</a> (int reference_SiPM)</td></tr>
<tr class="separator:a072fe05f5196e2d1f0baf54ac8c62793"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a898d2da7d9071ef733eb86625ed1cc7d" id="r_a898d2da7d9071ef733eb86625ed1cc7d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesnd_1_1analysis__tools.html#a898d2da7d9071ef733eb86625ed1cc7d">densityScifi</a> (int reference_SiPM, const TClonesArray &amp;digiHits, int radius, int min_hit_density, bool min_check)</td></tr>
<tr class="separator:a898d2da7d9071ef733eb86625ed1cc7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6dd4352f5c110708f8070ad1c88a907" id="r_aa6dd4352f5c110708f8070ad1c88a907"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesnd_1_1analysis__tools.html#aa6dd4352f5c110708f8070ad1c88a907">densityCheck</a> (const TClonesArray &amp;digiHits, int radius=64, int min_hit_density=36, int station=1, bool orientation=false)</td></tr>
<tr class="separator:aa6dd4352f5c110708f8070ad1c88a907"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3efcc7ce16eb9a30afcdcedd2c4f4ac2" id="r_a3efcc7ce16eb9a30afcdcedd2c4f4ac2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesnd_1_1analysis__tools.html#a3efcc7ce16eb9a30afcdcedd2c4f4ac2">showerInteractionWall</a> (const TClonesArray &amp;digiHits, const std::map&lt; std::string, float &gt; &amp;selection_parameters, int method=0, std::string setup=&quot;TI18&quot;)</td></tr>
<tr class="separator:a3efcc7ce16eb9a30afcdcedd2c4f4ac2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78b08ea6c3c2d141709d92390c1f87b8" id="r_a78b08ea6c3c2d141709d92390c1f87b8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesnd_1_1analysis__tools.html#a78b08ea6c3c2d141709d92390c1f87b8">showerInteractionWall</a> (const TClonesArray &amp;digiHits, int method=0, std::string setup=&quot;TI18&quot;)</td></tr>
<tr class="separator:a78b08ea6c3c2d141709d92390c1f87b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a072fe05f5196e2d1f0baf54ac8c62793" name="a072fe05f5196e2d1f0baf54ac8c62793"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a072fe05f5196e2d1f0baf54ac8c62793">&#9670;&#160;</a></span>calculateSiPMNumber()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int snd::analysis_tools::calculateSiPMNumber </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>reference_SiPM</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sndSciFiTools_8cxx_source.html#l00361">361</a> of file <a class="el" href="sndSciFiTools_8cxx_source.html">sndSciFiTools.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  362</span>{</div>
<div class="line"><span class="lineno">  363</span> </div>
<div class="line"><span class="lineno">  364</span>   <span class="keywordtype">int</span> ref_matAux = reference_SiPM % 100000;</div>
<div class="line"><span class="lineno">  365</span>   <span class="keywordtype">int</span> ref_mat = ref_matAux / 10000;</div>
<div class="line"><span class="lineno">  366</span>   <span class="keywordtype">int</span> ref_arrayAux = reference_SiPM % 10000;</div>
<div class="line"><span class="lineno">  367</span>   <span class="keywordtype">int</span> ref_array = ref_arrayAux / 1000;</div>
<div class="line"><span class="lineno">  368</span>   <span class="keywordtype">int</span> ref_channel = reference_SiPM % 1000;</div>
<div class="line"><span class="lineno">  369</span>   <span class="keywordtype">int</span> referenceChannel = ref_mat * 4 * 128 + ref_array * 128 + ref_channel;</div>
<div class="line"><span class="lineno">  370</span> </div>
<div class="line"><span class="lineno">  371</span>   <span class="keywordflow">return</span> referenceChannel;</div>
<div class="line"><span class="lineno">  372</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa6dd4352f5c110708f8070ad1c88a907" name="aa6dd4352f5c110708f8070ad1c88a907"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6dd4352f5c110708f8070ad1c88a907">&#9670;&#160;</a></span>densityCheck()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool snd::analysis_tools::densityCheck </td>
          <td>(</td>
          <td class="paramtype">const TClonesArray &amp;&#160;</td>
          <td class="paramname"><em>digiHits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>radius</em> = <code>64</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>min_hit_density</em> = <code>36</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>station</em> = <code>1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>orientation</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sndSciFiTools_8cxx_source.html#l00413">413</a> of file <a class="el" href="sndSciFiTools_8cxx_source.html">sndSciFiTools.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  415</span>{</div>
<div class="line"><span class="lineno">  416</span> </div>
<div class="line"><span class="lineno">  417</span>   <span class="keywordflow">if</span> (digiHits.GetEntries() &lt;= 0) {</div>
<div class="line"><span class="lineno">  418</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  419</span>   }</div>
<div class="line"><span class="lineno">  420</span> </div>
<div class="line"><span class="lineno">  421</span>   <span class="keywordflow">if</span> (radius &lt;= 0) {</div>
<div class="line"><span class="lineno">  422</span>      LOG(FATAL) &lt;&lt; <span class="stringliteral">&quot;Radius&lt;=0. Please provide a radius bigger than 0.&quot;</span>;</div>
<div class="line"><span class="lineno">  423</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  424</span>   }</div>
<div class="line"><span class="lineno">  425</span> </div>
<div class="line"><span class="lineno">  426</span>   <span class="keywordflow">if</span> (min_hit_density &lt; 0) {</div>
<div class="line"><span class="lineno">  427</span>      LOG(FATAL) &lt;&lt; <span class="stringliteral">&quot;Min_hit_density &lt; 0. Please provide a min_hit_density &gt;= 0.&quot;</span>;</div>
<div class="line"><span class="lineno">  428</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  429</span>   }</div>
<div class="line"><span class="lineno">  430</span> </div>
<div class="line"><span class="lineno">  431</span>   <span class="keywordflow">if</span> (min_hit_density &gt; 2 * radius) {</div>
<div class="line"><span class="lineno">  432</span>      LOG(warning) &lt;&lt; <span class="stringliteral">&quot;Warning! Radius of density check does not allow for the required minimum density!&quot;</span>;</div>
<div class="line"><span class="lineno">  433</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  434</span>   }</div>
<div class="line"><span class="lineno">  435</span> </div>
<div class="line"><span class="lineno">  436</span>   <span class="comment">// Creating a vector that stores the fired SiPM channels (should already be ordered but we sort</span></div>
<div class="line"><span class="lineno">  437</span>   <span class="comment">// afterwards to make sure)</span></div>
<div class="line"><span class="lineno">  438</span>   std::vector&lt;int&gt; fired_channels{};</div>
<div class="line"><span class="lineno">  439</span> </div>
<div class="line"><span class="lineno">  440</span>   <span class="comment">// Only fill the set with hits from the same station and with the same orientation as given in</span></div>
<div class="line"><span class="lineno">  441</span>   <span class="comment">// argument (false==horizontal and true==vertical)</span></div>
<div class="line"><span class="lineno">  442</span>   <span class="keywordflow">for</span> (<span class="keyword">auto</span> *p : digiHits) {</div>
<div class="line"><span class="lineno">  443</span>      <span class="keyword">auto</span> *hit = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="classsndScifiHit.html">sndScifiHit</a> *<span class="keyword">&gt;</span>(<a class="code hl_variable" href="namespaceconditionsDatabase_1_1demo_1_1drifttubeMonitoring.html#a1c800df226d66062268fa28c3e0c7f7a">p</a>);</div>
<div class="line"><span class="lineno">  444</span>      <span class="keywordflow">if</span> (!<a class="code hl_function" href="sndSciFiTools_8cxx.html#a1fd0777019d2b6e914490ff374f2f922">validateHit</a>(hit, station, orientation)) {</div>
<div class="line"><span class="lineno">  445</span>         <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  446</span>      }</div>
<div class="line"><span class="lineno">  447</span>      fired_channels.push_back(<a class="code hl_function" href="namespacesnd_1_1analysis__tools.html#a072fe05f5196e2d1f0baf54ac8c62793">calculateSiPMNumber</a>(hit-&gt;GetChannelID()));</div>
<div class="line"><span class="lineno">  448</span>   }</div>
<div class="line"><span class="lineno">  449</span> </div>
<div class="line"><span class="lineno">  450</span>   <span class="keywordtype">int</span> n_fired_channels = fired_channels.size();</div>
<div class="line"><span class="lineno">  451</span> </div>
<div class="line"><span class="lineno">  452</span>   <span class="keywordflow">if</span> (n_fired_channels &lt; min_hit_density) {</div>
<div class="line"><span class="lineno">  453</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  454</span>   }</div>
<div class="line"><span class="lineno">  455</span> </div>
<div class="line"><span class="lineno">  456</span>   <span class="comment">// Looping over the ordered hits, checking whether within an interval of &quot;min_hit_density&quot; the</span></div>
<div class="line"><span class="lineno">  457</span>   <span class="comment">// difference between the channel IDs is smaller than &quot;radius&quot;. If so, then we have the required</span></div>
<div class="line"><span class="lineno">  458</span>   <span class="comment">// density. Else, we check the next combination until we meet the criterion, or end the loop,</span></div>
<div class="line"><span class="lineno">  459</span>   <span class="comment">// returning false</span></div>
<div class="line"><span class="lineno">  460</span>   std::sort(fired_channels.begin(), fired_channels.end());</div>
<div class="line"><span class="lineno">  461</span>   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; <a class="code hl_variable" href="namespaceShipAna.html#aa4bf87f4d17f9d38b1d8f4d009bb54b3">i</a> &lt; n_fired_channels - min_hit_density; <a class="code hl_variable" href="namespaceShipAna.html#aa4bf87f4d17f9d38b1d8f4d009bb54b3">i</a>++) {</div>
<div class="line"><span class="lineno">  462</span> </div>
<div class="line"><span class="lineno">  463</span>      <span class="keywordflow">if</span> (fired_channels[i + min_hit_density - 1] - fired_channels[i] &lt;= radius * 2) {</div>
<div class="line"><span class="lineno">  464</span>         <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  465</span>      }</div>
<div class="line"><span class="lineno">  466</span>   }</div>
<div class="line"><span class="lineno">  467</span>   <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  468</span>}</div>
<div class="ttc" id="aclasssndScifiHit_html"><div class="ttname"><a href="classsndScifiHit.html">sndScifiHit</a></div><div class="ttdef"><b>Definition</b> <a href="sndScifiHit_8h_source.html#l00009">sndScifiHit.h:10</a></div></div>
<div class="ttc" id="anamespaceShipAna_html_aa4bf87f4d17f9d38b1d8f4d009bb54b3"><div class="ttname"><a href="namespaceShipAna.html#aa4bf87f4d17f9d38b1d8f4d009bb54b3">ShipAna.i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition</b> <a href="ShipAna_8py_source.html#l00086">ShipAna.py:86</a></div></div>
<div class="ttc" id="anamespaceconditionsDatabase_1_1demo_1_1drifttubeMonitoring_html_a1c800df226d66062268fa28c3e0c7f7a"><div class="ttname"><a href="namespaceconditionsDatabase_1_1demo_1_1drifttubeMonitoring.html#a1c800df226d66062268fa28c3e0c7f7a">conditionsDatabase.demo.drifttubeMonitoring.p</a></div><div class="ttdeci">str p</div><div class="ttdef"><b>Definition</b> <a href="drifttubeMonitoring_8py_source.html#l00289">drifttubeMonitoring.py:289</a></div></div>
<div class="ttc" id="anamespacesnd_1_1analysis__tools_html_a072fe05f5196e2d1f0baf54ac8c62793"><div class="ttname"><a href="namespacesnd_1_1analysis__tools.html#a072fe05f5196e2d1f0baf54ac8c62793">snd::analysis_tools::calculateSiPMNumber</a></div><div class="ttdeci">int calculateSiPMNumber(int reference_SiPM)</div><div class="ttdef"><b>Definition</b> <a href="sndSciFiTools_8cxx_source.html#l00361">sndSciFiTools.cxx:361</a></div></div>
<div class="ttc" id="asndSciFiTools_8cxx_html_a1fd0777019d2b6e914490ff374f2f922"><div class="ttname"><a href="sndSciFiTools_8cxx.html#a1fd0777019d2b6e914490ff374f2f922">validateHit</a></div><div class="ttdeci">bool validateHit(sndScifiHit *aHit, int ref_station, bool ref_orientation)</div><div class="ttdef"><b>Definition</b> <a href="sndSciFiTools_8cxx_source.html#l00105">sndSciFiTools.cxx:105</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a898d2da7d9071ef733eb86625ed1cc7d" name="a898d2da7d9071ef733eb86625ed1cc7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a898d2da7d9071ef733eb86625ed1cc7d">&#9670;&#160;</a></span>densityScifi()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int snd::analysis_tools::densityScifi </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>reference_SiPM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TClonesArray &amp;&#160;</td>
          <td class="paramname"><em>digiHits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>radius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>min_hit_density</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>min_check</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sndSciFiTools_8cxx_source.html#l00374">374</a> of file <a class="el" href="sndSciFiTools_8cxx_source.html">sndSciFiTools.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  376</span>{</div>
<div class="line"><span class="lineno">  377</span> </div>
<div class="line"><span class="lineno">  378</span>   <span class="keywordtype">int</span> hit_density = 0;</div>
<div class="line"><span class="lineno">  379</span> </div>
<div class="line"><span class="lineno">  380</span>   <span class="keywordtype">bool</span> orientation = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  381</span>   <span class="keywordflow">if</span> (<span class="keywordtype">int</span>(reference_SiPM / 100000) % 10 == 1) {</div>
<div class="line"><span class="lineno">  382</span>      orientation = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  383</span>   }</div>
<div class="line"><span class="lineno">  384</span>   <span class="keywordtype">int</span> ref_station = reference_SiPM / 1000000;</div>
<div class="line"><span class="lineno">  385</span>   <span class="keywordtype">int</span> referenceChannel = calculateSiPMNumber(reference_SiPM);</div>
<div class="line"><span class="lineno">  386</span> </div>
<div class="line"><span class="lineno">  387</span>   <span class="keywordflow">for</span> (<span class="keyword">auto</span> *p : digiHits) {</div>
<div class="line"><span class="lineno">  388</span>      <span class="keyword">auto</span> *hit = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="classsndScifiHit.html">sndScifiHit</a> *<span class="keyword">&gt;</span>(p);</div>
<div class="line"><span class="lineno">  389</span>      <span class="keywordflow">if</span> (!<a class="code hl_function" href="sndSciFiTools_8cxx.html#a1fd0777019d2b6e914490ff374f2f922">validateHit</a>(hit, ref_station, orientation)) {</div>
<div class="line"><span class="lineno">  390</span>         <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  391</span>      }</div>
<div class="line"><span class="lineno">  392</span>      <span class="keywordtype">int</span> hitChannel = calculateSiPMNumber(hit-&gt;GetChannelID());</div>
<div class="line"><span class="lineno">  393</span>      <span class="keywordflow">if</span> (radius == -1) {</div>
<div class="line"><span class="lineno">  394</span>         hit_density++;</div>
<div class="line"><span class="lineno">  395</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  396</span>         <span class="keywordflow">if</span> (hitChannel &gt; referenceChannel + radius) {</div>
<div class="line"><span class="lineno">  397</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  398</span>         }</div>
<div class="line"><span class="lineno">  399</span>         <span class="keywordflow">if</span> (abs(referenceChannel - hitChannel) &lt;= radius) {</div>
<div class="line"><span class="lineno">  400</span>            hit_density++;</div>
<div class="line"><span class="lineno">  401</span>         }</div>
<div class="line"><span class="lineno">  402</span>      }</div>
<div class="line"><span class="lineno">  403</span> </div>
<div class="line"><span class="lineno">  404</span>      <span class="keywordflow">if</span> (min_check &amp;&amp; (hit_density &gt;= min_hit_density)) {</div>
<div class="line"><span class="lineno">  405</span>         <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  406</span>      }</div>
<div class="line"><span class="lineno">  407</span>   }</div>
<div class="line"><span class="lineno">  408</span> </div>
<div class="line"><span class="lineno">  409</span>   <span class="keywordflow">return</span> hit_density;</div>
<div class="line"><span class="lineno">  410</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a78c74efd98070d9f53be87caa79640bb" name="a78c74efd98070d9f53be87caa79640bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78c74efd98070d9f53be87caa79640bb">&#9670;&#160;</a></span>filterScifiHits() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt; TClonesArray &gt; snd::analysis_tools::filterScifiHits </td>
          <td>(</td>
          <td class="paramtype">const TClonesArray &amp;&#160;</td>
          <td class="paramname"><em>digiHits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; std::string, float &gt; &amp;&#160;</td>
          <td class="paramname"><em>selection_parameters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>method</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>setup</em> = <code>&quot;TI18&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sndSciFiTools_8cxx_source.html#l00287">287</a> of file <a class="el" href="sndSciFiTools_8cxx_source.html">sndSciFiTools.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  290</span>{</div>
<div class="line"><span class="lineno">  291</span>   TClonesArray supportArray(<span class="stringliteral">&quot;sndScifiHit&quot;</span>, 0);</div>
<div class="line"><span class="lineno">  292</span>   <span class="keyword">auto</span> filteredHits = std::make_unique&lt;TClonesArray&gt;(<span class="stringliteral">&quot;sndScifiHit&quot;</span>, digiHits.GetEntries());</div>
<div class="line"><span class="lineno">  293</span>   <span class="keywordtype">int</span> filteredHitsIndex = 0;</div>
<div class="line"><span class="lineno">  294</span>   <span class="keywordtype">int</span> ScifiStations = 5;</div>
<div class="line"><span class="lineno">  295</span>   <span class="keywordflow">if</span> (setup == <span class="stringliteral">&quot;H8&quot;</span>) {</div>
<div class="line"><span class="lineno">  296</span>      ScifiStations = 4;</div>
<div class="line"><span class="lineno">  297</span>   } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  298</span>      LOG(info) &lt;&lt; <span class="stringliteral">&quot;\&quot;TI18\&quot; setup will be used by default, please provide \&quot;H8\&quot; for the Testbeam setup.&quot;</span>;</div>
<div class="line"><span class="lineno">  299</span>   }</div>
<div class="line"><span class="lineno">  300</span> </div>
<div class="line"><span class="lineno">  301</span>   <a class="code hl_class" href="classsndScifiHit.html">sndScifiHit</a> *hit;</div>
<div class="line"><span class="lineno">  302</span>   TIter hitIterator(&amp;supportArray);</div>
<div class="line"><span class="lineno">  303</span> </div>
<div class="line"><span class="lineno">  304</span>   <span class="keywordflow">if</span> (method == 0) {</div>
<div class="line"><span class="lineno">  305</span> </div>
<div class="line"><span class="lineno">  306</span>      <span class="keywordflow">if</span> ((selection_parameters.find(<span class="stringliteral">&quot;bins_x&quot;</span>) == selection_parameters.end()) ||</div>
<div class="line"><span class="lineno">  307</span>          (selection_parameters.find(<span class="stringliteral">&quot;min_x&quot;</span>) == selection_parameters.end()) ||</div>
<div class="line"><span class="lineno">  308</span>          (selection_parameters.find(<span class="stringliteral">&quot;max_x&quot;</span>) == selection_parameters.end()) ||</div>
<div class="line"><span class="lineno">  309</span>          (selection_parameters.find(<span class="stringliteral">&quot;time_lower_range&quot;</span>) == selection_parameters.end())) {</div>
<div class="line"><span class="lineno">  310</span>         LOG(FATAL) &lt;&lt; <span class="stringliteral">&quot;In order to use method 0 please provide the correct selection_parameters. Consider the default &quot;</span></div>
<div class="line"><span class="lineno">  311</span>                       <span class="stringliteral">&quot;= {{\&quot;bins_x\&quot;, 52.}, {\&quot;min_x\&quot;, 0.}, {\&quot;max_x\&quot;, 26.}, {\&quot;time_lower_range\&quot;, &quot;</span></div>
<div class="line"><span class="lineno">  312</span>                       <span class="stringliteral">&quot;1E9/(2*ShipUnit::snd_freq/ShipUnit::hertz)}, {\&quot;time_upper_range\&quot;, &quot;</span></div>
<div class="line"><span class="lineno">  313</span>                       <span class="stringliteral">&quot;2E9/(ShipUnit::snd_freq/ShipUnit::hertz)}}&quot;</span>;</div>
<div class="line"><span class="lineno">  314</span>      }</div>
<div class="line"><span class="lineno">  315</span> </div>
<div class="line"><span class="lineno">  316</span>      <span class="comment">// This is overwriting the previous arrays with the newest one</span></div>
<div class="line"><span class="lineno">  317</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> station : ROOT::MakeSeq(1, ScifiStations + 1)) {</div>
<div class="line"><span class="lineno">  318</span>         <span class="keywordflow">for</span> (<span class="keyword">auto</span> orientation : {<span class="keyword">false</span>, <span class="keyword">true</span>}) {</div>
<div class="line"><span class="lineno">  319</span> </div>
<div class="line"><span class="lineno">  320</span>            <span class="keyword">auto</span> supportArray = <a class="code hl_function" href="namespacesnd_1_1analysis__tools.html#aeb14e67896089cd76dae5e5131de402e">selectScifiHits</a>(digiHits, station, orientation, selection_parameters, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  321</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span> *p : *supportArray) {</div>
<div class="line"><span class="lineno">  322</span>               <span class="keyword">auto</span> *hit = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="classsndScifiHit.html">sndScifiHit</a> *<span class="keyword">&gt;</span>(<a class="code hl_variable" href="namespaceconditionsDatabase_1_1demo_1_1drifttubeMonitoring.html#a1c800df226d66062268fa28c3e0c7f7a">p</a>);</div>
<div class="line"><span class="lineno">  323</span>               <span class="keywordflow">if</span> (hit-&gt;<a class="code hl_function" href="classsndScifiHit.html#a99afbc5a294dfd9f9ddcf9bada3d90ba">isValid</a>()) {</div>
<div class="line"><span class="lineno">  324</span>                  <span class="keyword">new</span> ((*filteredHits)[filteredHitsIndex++]) <a class="code hl_class" href="classsndScifiHit.html">sndScifiHit</a>(*hit);</div>
<div class="line"><span class="lineno">  325</span>               }</div>
<div class="line"><span class="lineno">  326</span>            }</div>
<div class="line"><span class="lineno">  327</span>         }</div>
<div class="line"><span class="lineno">  328</span>      }</div>
<div class="line"><span class="lineno">  329</span>   } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  330</span>      LOG(error) &lt;&lt; <span class="stringliteral">&quot;Please provide a valid time filter method from:&quot;</span>;</div>
<div class="line"><span class="lineno">  331</span>      LOG(error) &lt;&lt; <span class="stringliteral">&quot;(0): Events within \\mp time_lower_range time_upper_range of the peak of the time distribution &quot;</span></div>
<div class="line"><span class="lineno">  332</span>                    <span class="stringliteral">&quot;for Scifi Hits within each station and orientation&quot;</span>;</div>
<div class="line"><span class="lineno">  333</span>      LOG(FATAL) &lt;&lt; <span class="stringliteral">&quot;selection_parameters = {bins_x, min_x, max_x, time_lower_range, time_upper_range}.&quot;</span>;</div>
<div class="line"><span class="lineno">  334</span>   }</div>
<div class="line"><span class="lineno">  335</span>   <span class="keywordflow">return</span> filteredHits;</div>
<div class="line"><span class="lineno">  336</span>}</div>
<div class="ttc" id="aclasssndScifiHit_html_a99afbc5a294dfd9f9ddcf9bada3d90ba"><div class="ttname"><a href="classsndScifiHit.html#a99afbc5a294dfd9f9ddcf9bada3d90ba">sndScifiHit::isValid</a></div><div class="ttdeci">bool isValid() const</div><div class="ttdef"><b>Definition</b> <a href="sndScifiHit_8h_source.html#l00030">sndScifiHit.h:30</a></div></div>
<div class="ttc" id="anamespacesnd_1_1analysis__tools_html_aeb14e67896089cd76dae5e5131de402e"><div class="ttname"><a href="namespacesnd_1_1analysis__tools.html#aeb14e67896089cd76dae5e5131de402e">snd::analysis_tools::selectScifiHits</a></div><div class="ttdeci">std::unique_ptr&lt; TClonesArray &gt; selectScifiHits(const TClonesArray &amp;digiHits, int station, bool orientation, int bins_x=52, float min_x=0.0, float max_x=26.0, float time_lower_range=1E9/(2 *ShipUnit::snd_freq), float time_upper_range=2E9/(ShipUnit::snd_freq/ShipUnit::hertz), bool make_selection=true)</div><div class="ttdef"><b>Definition</b> <a href="sndSciFiTools_8cxx_source.html#l00182">sndSciFiTools.cxx:182</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2a0743bec57ce3c0441563fab456f415" name="a2a0743bec57ce3c0441563fab456f415"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a0743bec57ce3c0441563fab456f415">&#9670;&#160;</a></span>filterScifiHits() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt; TClonesArray &gt; snd::analysis_tools::filterScifiHits </td>
          <td>(</td>
          <td class="paramtype">const TClonesArray &amp;&#160;</td>
          <td class="paramname"><em>digiHits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>method</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>setup</em> = <code>&quot;TI18&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sndSciFiTools_8cxx_source.html#l00339">339</a> of file <a class="el" href="sndSciFiTools_8cxx_source.html">sndSciFiTools.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  340</span>{</div>
<div class="line"><span class="lineno">  341</span> </div>
<div class="line"><span class="lineno">  342</span>   std::map&lt;std::string, float&gt; selection_parameters;</div>
<div class="line"><span class="lineno">  343</span> </div>
<div class="line"><span class="lineno">  344</span>   <span class="keywordflow">if</span> (method == 0) {</div>
<div class="line"><span class="lineno">  345</span> </div>
<div class="line"><span class="lineno">  346</span>      selection_parameters[<span class="stringliteral">&quot;bins_x&quot;</span>] = 52.0;</div>
<div class="line"><span class="lineno">  347</span>      selection_parameters[<span class="stringliteral">&quot;min_x&quot;</span>] = 0.0;</div>
<div class="line"><span class="lineno">  348</span>      selection_parameters[<span class="stringliteral">&quot;max_x&quot;</span>] = 26.0;</div>
<div class="line"><span class="lineno">  349</span>      selection_parameters[<span class="stringliteral">&quot;time_lower_range&quot;</span>] = 1E9 / (2 * ShipUnit::snd_freq / ShipUnit::hertz);</div>
<div class="line"><span class="lineno">  350</span>      selection_parameters[<span class="stringliteral">&quot;time_upper_range&quot;</span>] = 2E9 / (ShipUnit::snd_freq / ShipUnit::hertz);</div>
<div class="line"><span class="lineno">  351</span> </div>
<div class="line"><span class="lineno">  352</span>   } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  353</span>      LOG(FATAL) &lt;&lt; <span class="stringliteral">&quot;Please use method=0. No other methods implemented so far.&quot;</span>;</div>
<div class="line"><span class="lineno">  354</span>   }</div>
<div class="line"><span class="lineno">  355</span> </div>
<div class="line"><span class="lineno">  356</span>   <span class="keywordflow">return</span> filterScifiHits(digiHits, selection_parameters, method, setup);</div>
<div class="line"><span class="lineno">  357</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aaf671a252762c6da49f48a7e6cc31431" name="aaf671a252762c6da49f48a7e6cc31431"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf671a252762c6da49f48a7e6cc31431">&#9670;&#160;</a></span>findScifiStation() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int snd::analysis_tools::findScifiStation </td>
          <td>(</td>
          <td class="paramtype">const TClonesArray *&#160;</td>
          <td class="paramname"><em>digiHits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>threshold</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sndSciFiTools_8cxx_source.html#l00093">93</a> of file <a class="el" href="sndSciFiTools_8cxx_source.html">sndSciFiTools.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   94</span>{</div>
<div class="line"><span class="lineno">   95</span>   std::vector&lt;int&gt; horizontal_hits = std::vector&lt;int&gt;(5);</div>
<div class="line"><span class="lineno">   96</span>   std::vector&lt;int&gt; vertical_hits = std::vector&lt;int&gt;(5);</div>
<div class="line"><span class="lineno">   97</span> </div>
<div class="line"><span class="lineno">   98</span>   <a class="code hl_function" href="namespacesnd_1_1analysis__tools.html#a4366cddb81edce8fb50a4dedd3875e84">getSciFiHitsPerStation</a>(digiHits, horizontal_hits, vertical_hits);</div>
<div class="line"><span class="lineno">   99</span> </div>
<div class="line"><span class="lineno">  100</span>   <span class="keywordflow">return</span> <a class="code hl_function" href="namespacesnd_1_1analysis__tools.html#a1cfa1e0acecf53005048a0b11c125b57">findScifiStation</a>(horizontal_hits, vertical_hits, threshold);</div>
<div class="line"><span class="lineno">  101</span>}</div>
<div class="ttc" id="anamespacesnd_1_1analysis__tools_html_a1cfa1e0acecf53005048a0b11c125b57"><div class="ttname"><a href="namespacesnd_1_1analysis__tools.html#a1cfa1e0acecf53005048a0b11c125b57">snd::analysis_tools::findScifiStation</a></div><div class="ttdeci">int findScifiStation(std::vector&lt; int &gt; &amp;horizontal_hits, std::vector&lt; int &gt; &amp;vertical_hits, float threshold)</div><div class="ttdef"><b>Definition</b> <a href="sndSciFiTools_8cxx_source.html#l00077">sndSciFiTools.cxx:77</a></div></div>
<div class="ttc" id="anamespacesnd_1_1analysis__tools_html_a4366cddb81edce8fb50a4dedd3875e84"><div class="ttname"><a href="namespacesnd_1_1analysis__tools.html#a4366cddb81edce8fb50a4dedd3875e84">snd::analysis_tools::getSciFiHitsPerStation</a></div><div class="ttdeci">void getSciFiHitsPerStation(const TClonesArray *digiHits, std::vector&lt; int &gt; &amp;horizontal_hits, std::vector&lt; int &gt; &amp;vertical_hits)</div><div class="ttdef"><b>Definition</b> <a href="sndSciFiTools_8cxx_source.html#l00012">sndSciFiTools.cxx:12</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1cfa1e0acecf53005048a0b11c125b57" name="a1cfa1e0acecf53005048a0b11c125b57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1cfa1e0acecf53005048a0b11c125b57">&#9670;&#160;</a></span>findScifiStation() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int snd::analysis_tools::findScifiStation </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>horizontal_hits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>vertical_hits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>threshold</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sndSciFiTools_8cxx_source.html#l00077">77</a> of file <a class="el" href="sndSciFiTools_8cxx_source.html">sndSciFiTools.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   79</span>{</div>
<div class="line"><span class="lineno">   80</span> </div>
<div class="line"><span class="lineno">   81</span>   std::vector&lt;float&gt; frac = <a class="code hl_function" href="namespacesnd_1_1analysis__tools.html#ab110e213c86b26c581a9c7456a140ebc">getFractionalHitsPerScifiPlane</a>(horizontal_hits, vertical_hits);</div>
<div class="line"><span class="lineno">   82</span> </div>
<div class="line"><span class="lineno">   83</span>   std::vector&lt;float&gt; frac_sum = std::vector&lt;float&gt;(frac.size());</div>
<div class="line"><span class="lineno">   84</span> </div>
<div class="line"><span class="lineno">   85</span>   std::partial_sum(frac.begin(), frac.end(), frac_sum.begin());</div>
<div class="line"><span class="lineno">   86</span> </div>
<div class="line"><span class="lineno">   87</span>   std::vector&lt;float&gt;::iterator station =</div>
<div class="line"><span class="lineno">   88</span>      std::find_if(frac_sum.begin(), frac_sum.end(), [&amp;threshold](<span class="keyword">const</span> <span class="keyword">auto</span> &amp;f) { return f &gt; threshold; });</div>
<div class="line"><span class="lineno">   89</span> </div>
<div class="line"><span class="lineno">   90</span>   <span class="keywordflow">return</span> station - frac_sum.begin() + 1;</div>
<div class="line"><span class="lineno">   91</span>}</div>
<div class="ttc" id="anamespacesnd_1_1analysis__tools_html_ab110e213c86b26c581a9c7456a140ebc"><div class="ttname"><a href="namespacesnd_1_1analysis__tools.html#ab110e213c86b26c581a9c7456a140ebc">snd::analysis_tools::getFractionalHitsPerScifiPlane</a></div><div class="ttdeci">std::vector&lt; float &gt; getFractionalHitsPerScifiPlane(std::vector&lt; int &gt; &amp;horizontal_hits, std::vector&lt; int &gt; &amp;vertical_hits)</div><div class="ttdef"><b>Definition</b> <a href="sndSciFiTools_8cxx_source.html#l00053">sndSciFiTools.cxx:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adb1bd3e6aa09e4d65a9c92a5133a8ac9" name="adb1bd3e6aa09e4d65a9c92a5133a8ac9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb1bd3e6aa09e4d65a9c92a5133a8ac9">&#9670;&#160;</a></span>getFractionalHitsPerScifiPlane() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; float &gt; snd::analysis_tools::getFractionalHitsPerScifiPlane </td>
          <td>(</td>
          <td class="paramtype">const TClonesArray *&#160;</td>
          <td class="paramname"><em>digiHits</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sndSciFiTools_8cxx_source.html#l00067">67</a> of file <a class="el" href="sndSciFiTools_8cxx_source.html">sndSciFiTools.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   68</span>{</div>
<div class="line"><span class="lineno">   69</span>   std::vector&lt;int&gt; horizontal_hits = std::vector&lt;int&gt;(5);</div>
<div class="line"><span class="lineno">   70</span>   std::vector&lt;int&gt; vertical_hits = std::vector&lt;int&gt;(5);</div>
<div class="line"><span class="lineno">   71</span> </div>
<div class="line"><span class="lineno">   72</span>   <a class="code hl_function" href="namespacesnd_1_1analysis__tools.html#a4366cddb81edce8fb50a4dedd3875e84">getSciFiHitsPerStation</a>(digiHits, horizontal_hits, vertical_hits);</div>
<div class="line"><span class="lineno">   73</span> </div>
<div class="line"><span class="lineno">   74</span>   <span class="keywordflow">return</span> <a class="code hl_function" href="namespacesnd_1_1analysis__tools.html#ab110e213c86b26c581a9c7456a140ebc">getFractionalHitsPerScifiPlane</a>(horizontal_hits, vertical_hits);</div>
<div class="line"><span class="lineno">   75</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab110e213c86b26c581a9c7456a140ebc" name="ab110e213c86b26c581a9c7456a140ebc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab110e213c86b26c581a9c7456a140ebc">&#9670;&#160;</a></span>getFractionalHitsPerScifiPlane() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; float &gt; snd::analysis_tools::getFractionalHitsPerScifiPlane </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>horizontal_hits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>vertical_hits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sndSciFiTools_8cxx_source.html#l00053">53</a> of file <a class="el" href="sndSciFiTools_8cxx_source.html">sndSciFiTools.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   54</span>{</div>
<div class="line"><span class="lineno">   55</span> </div>
<div class="line"><span class="lineno">   56</span>   <span class="keywordtype">int</span> total_hits = <a class="code hl_function" href="namespacesnd_1_1analysis__tools.html#add38a36ae42dce4c3e48621c2c4d0b23">getTotalSciFiHits</a>(horizontal_hits, vertical_hits);</div>
<div class="line"><span class="lineno">   57</span> </div>
<div class="line"><span class="lineno">   58</span>   std::vector&lt;float&gt; fractional_hits_per_station = std::vector&lt;float&gt;(horizontal_hits.size());</div>
<div class="line"><span class="lineno">   59</span> </div>
<div class="line"><span class="lineno">   60</span>   std::transform(horizontal_hits.begin(), horizontal_hits.end(), vertical_hits.begin(),</div>
<div class="line"><span class="lineno">   61</span>                  fractional_hits_per_station.begin(),</div>
<div class="line"><span class="lineno">   62</span>                  [&amp;total_hits](<span class="keyword">const</span> <span class="keyword">auto</span> &amp;hor, <span class="keyword">const</span> <span class="keyword">auto</span> &amp;ver) { return ((float)hor + ver) / total_hits; });</div>
<div class="line"><span class="lineno">   63</span> </div>
<div class="line"><span class="lineno">   64</span>   <span class="keywordflow">return</span> fractional_hits_per_station;</div>
<div class="line"><span class="lineno">   65</span>}</div>
<div class="ttc" id="anamespacesnd_1_1analysis__tools_html_add38a36ae42dce4c3e48621c2c4d0b23"><div class="ttname"><a href="namespacesnd_1_1analysis__tools.html#add38a36ae42dce4c3e48621c2c4d0b23">snd::analysis_tools::getTotalSciFiHits</a></div><div class="ttdeci">int getTotalSciFiHits(std::vector&lt; int &gt; &amp;horizontal_hits, std::vector&lt; int &gt; &amp;vertical_hits)</div><div class="ttdef"><b>Definition</b> <a href="sndSciFiTools_8cxx_source.html#l00036">sndSciFiTools.cxx:36</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a898b9cbb7bac8c95c59069b6aecbe9b3" name="a898b9cbb7bac8c95c59069b6aecbe9b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a898b9cbb7bac8c95c59069b6aecbe9b3">&#9670;&#160;</a></span>getScifiHits()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt; TClonesArray &gt; snd::analysis_tools::getScifiHits </td>
          <td>(</td>
          <td class="paramtype">const TClonesArray &amp;&#160;</td>
          <td class="paramname"><em>digiHits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>station</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>orientation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sndSciFiTools_8cxx_source.html#l00158">158</a> of file <a class="el" href="sndSciFiTools_8cxx_source.html">sndSciFiTools.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  159</span>{</div>
<div class="line"><span class="lineno">  160</span> </div>
<div class="line"><span class="lineno">  161</span>   <span class="keyword">auto</span> selectedHits = std::make_unique&lt;TClonesArray&gt;(<span class="stringliteral">&quot;sndScifiHit&quot;</span>);</div>
<div class="line"><span class="lineno">  162</span> </div>
<div class="line"><span class="lineno">  163</span>   <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><span class="lineno">  164</span>   <span class="keywordflow">for</span> (<span class="keyword">auto</span> *p : digiHits) {</div>
<div class="line"><span class="lineno">  165</span>      <span class="keyword">auto</span> *hit = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="classsndScifiHit.html">sndScifiHit</a> *<span class="keyword">&gt;</span>(p);</div>
<div class="line"><span class="lineno">  166</span>      <span class="keywordflow">if</span> (!<a class="code hl_function" href="sndSciFiTools_8cxx.html#a1fd0777019d2b6e914490ff374f2f922">validateHit</a>(hit, station, orientation)) {</div>
<div class="line"><span class="lineno">  167</span>         <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  168</span>      }</div>
<div class="line"><span class="lineno">  169</span>      <span class="keyword">new</span> ((*selectedHits)[i++]) <a class="code hl_class" href="classsndScifiHit.html">sndScifiHit</a>(*hit);</div>
<div class="line"><span class="lineno">  170</span>   }</div>
<div class="line"><span class="lineno">  171</span> </div>
<div class="line"><span class="lineno">  172</span>   <span class="keywordflow">return</span> selectedHits;</div>
<div class="line"><span class="lineno">  173</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4366cddb81edce8fb50a4dedd3875e84" name="a4366cddb81edce8fb50a4dedd3875e84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4366cddb81edce8fb50a4dedd3875e84">&#9670;&#160;</a></span>getSciFiHitsPerStation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void snd::analysis_tools::getSciFiHitsPerStation </td>
          <td>(</td>
          <td class="paramtype">const TClonesArray *&#160;</td>
          <td class="paramname"><em>digiHits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>horizontal_hits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>vertical_hits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sndSciFiTools_8cxx_source.html#l00012">12</a> of file <a class="el" href="sndSciFiTools_8cxx_source.html">sndSciFiTools.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   14</span>{</div>
<div class="line"><span class="lineno">   15</span> </div>
<div class="line"><span class="lineno">   16</span>   <span class="comment">// Clear hits per plane vectors</span></div>
<div class="line"><span class="lineno">   17</span>   std::fill(horizontal_hits.begin(), horizontal_hits.end(), 0);</div>
<div class="line"><span class="lineno">   18</span>   std::fill(vertical_hits.begin(), vertical_hits.end(), 0);</div>
<div class="line"><span class="lineno">   19</span> </div>
<div class="line"><span class="lineno">   20</span>   <span class="comment">// Add valid hits to hits per plane vectors</span></div>
<div class="line"><span class="lineno">   21</span>   <a class="code hl_class" href="classsndScifiHit.html">sndScifiHit</a> *hit;</div>
<div class="line"><span class="lineno">   22</span>   TIter hitIterator(digiHits);</div>
<div class="line"><span class="lineno">   23</span> </div>
<div class="line"><span class="lineno">   24</span>   <span class="keywordflow">while</span> (hit = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="classsndScifiHit.html">sndScifiHit</a> *<span class="keyword">&gt;</span>(hitIterator.Next())) {</div>
<div class="line"><span class="lineno">   25</span>      <span class="keywordflow">if</span> (hit-&gt;<a class="code hl_function" href="classsndScifiHit.html#a99afbc5a294dfd9f9ddcf9bada3d90ba">isValid</a>()) {</div>
<div class="line"><span class="lineno">   26</span>         <span class="keywordtype">int</span> station = hit-&gt;<a class="code hl_function" href="classsndScifiHit.html#a18eb9526024996df83366096a1e41b0b">GetStation</a>();</div>
<div class="line"><span class="lineno">   27</span>         <span class="keywordflow">if</span> (hit-&gt;<a class="code hl_function" href="classsndScifiHit.html#ac527f08d5770476f38f11f33efbf849e">isVertical</a>()) {</div>
<div class="line"><span class="lineno">   28</span>            vertical_hits[station - 1]++;</div>
<div class="line"><span class="lineno">   29</span>         } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   30</span>            horizontal_hits[station - 1]++;</div>
<div class="line"><span class="lineno">   31</span>         }</div>
<div class="line"><span class="lineno">   32</span>      }</div>
<div class="line"><span class="lineno">   33</span>   }</div>
<div class="line"><span class="lineno">   34</span>}</div>
<div class="ttc" id="aclasssndScifiHit_html_a18eb9526024996df83366096a1e41b0b"><div class="ttname"><a href="classsndScifiHit.html#a18eb9526024996df83366096a1e41b0b">sndScifiHit::GetStation</a></div><div class="ttdeci">Int_t GetStation()</div><div class="ttdef"><b>Definition</b> <a href="sndScifiHit_8h_source.html#l00031">sndScifiHit.h:31</a></div></div>
<div class="ttc" id="aclasssndScifiHit_html_ac527f08d5770476f38f11f33efbf849e"><div class="ttname"><a href="classsndScifiHit.html#ac527f08d5770476f38f11f33efbf849e">sndScifiHit::isVertical</a></div><div class="ttdeci">bool isVertical()</div><div class="ttdef"><b>Definition</b> <a href="sndScifiHit_8h_source.html#l00032">sndScifiHit.h:32</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab2e65a7ac6bc899bf97748cab9c03da6" name="ab2e65a7ac6bc899bf97748cab9c03da6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2e65a7ac6bc899bf97748cab9c03da6">&#9670;&#160;</a></span>getTotalSciFiHits() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int snd::analysis_tools::getTotalSciFiHits </td>
          <td>(</td>
          <td class="paramtype">const TClonesArray *&#160;</td>
          <td class="paramname"><em>digiHits</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sndSciFiTools_8cxx_source.html#l00042">42</a> of file <a class="el" href="sndSciFiTools_8cxx_source.html">sndSciFiTools.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   43</span>{</div>
<div class="line"><span class="lineno">   44</span>   std::vector&lt;int&gt; horizontal_hits = std::vector&lt;int&gt;(5);</div>
<div class="line"><span class="lineno">   45</span>   std::vector&lt;int&gt; vertical_hits = std::vector&lt;int&gt;(5);</div>
<div class="line"><span class="lineno">   46</span> </div>
<div class="line"><span class="lineno">   47</span>   <a class="code hl_function" href="namespacesnd_1_1analysis__tools.html#a4366cddb81edce8fb50a4dedd3875e84">getSciFiHitsPerStation</a>(digiHits, horizontal_hits, vertical_hits);</div>
<div class="line"><span class="lineno">   48</span> </div>
<div class="line"><span class="lineno">   49</span>   <span class="keywordflow">return</span> <a class="code hl_function" href="namespacesnd_1_1analysis__tools.html#add38a36ae42dce4c3e48621c2c4d0b23">getTotalSciFiHits</a>(horizontal_hits, vertical_hits);</div>
<div class="line"><span class="lineno">   50</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="add38a36ae42dce4c3e48621c2c4d0b23" name="add38a36ae42dce4c3e48621c2c4d0b23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add38a36ae42dce4c3e48621c2c4d0b23">&#9670;&#160;</a></span>getTotalSciFiHits() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int snd::analysis_tools::getTotalSciFiHits </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>horizontal_hits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>vertical_hits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sndSciFiTools_8cxx_source.html#l00036">36</a> of file <a class="el" href="sndSciFiTools_8cxx_source.html">sndSciFiTools.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   37</span>{</div>
<div class="line"><span class="lineno">   38</span>   <span class="keywordflow">return</span> std::accumulate(horizontal_hits.begin(), horizontal_hits.end(),</div>
<div class="line"><span class="lineno">   39</span>                          std::accumulate(vertical_hits.begin(), vertical_hits.end(), 0));</div>
<div class="line"><span class="lineno">   40</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5159d7eeb2993eba4f46fcd69f625612" name="a5159d7eeb2993eba4f46fcd69f625612"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5159d7eeb2993eba4f46fcd69f625612">&#9670;&#160;</a></span>peakScifiTiming()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float snd::analysis_tools::peakScifiTiming </td>
          <td>(</td>
          <td class="paramtype">const TClonesArray &amp;&#160;</td>
          <td class="paramname"><em>digiHits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bins</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>min_x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>max_x</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sndSciFiTools_8cxx_source.html#l00124">124</a> of file <a class="el" href="sndSciFiTools_8cxx_source.html">sndSciFiTools.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  125</span>{</div>
<div class="line"><span class="lineno">  126</span> </div>
<div class="line"><span class="lineno">  127</span>   <span class="keywordflow">if</span> (digiHits.GetEntries() &lt;= 0) {</div>
<div class="line"><span class="lineno">  128</span>      LOG(warning) &lt;&lt; <span class="stringliteral">&quot;digiHits has no valid SciFi Hits and as such no maximum for the timing distribution.&quot;</span>;</div>
<div class="line"><span class="lineno">  129</span>      <span class="keywordflow">return</span> -1.;</div>
<div class="line"><span class="lineno">  130</span>   }</div>
<div class="line"><span class="lineno">  131</span> </div>
<div class="line"><span class="lineno">  132</span>   TH1F ScifiTiming(<span class="stringliteral">&quot;Timing&quot;</span>, <span class="stringliteral">&quot;Scifi Timing&quot;</span>, bins, min_x, max_x);</div>
<div class="line"><span class="lineno">  133</span> </div>
<div class="line"><span class="lineno">  134</span>   <span class="keywordtype">int</span> refStation = ((<a class="code hl_class" href="classsndScifiHit.html">sndScifiHit</a> *)digiHits.At(0))-&gt;GetStation();</div>
<div class="line"><span class="lineno">  135</span>   <span class="keywordtype">bool</span> refOrientation = ((<a class="code hl_class" href="classsndScifiHit.html">sndScifiHit</a> *)digiHits.At(0))-&gt;isVertical();</div>
<div class="line"><span class="lineno">  136</span>   <span class="keywordtype">float</span> hitTime = -1.0;</div>
<div class="line"><span class="lineno">  137</span> </div>
<div class="line"><span class="lineno">  138</span>   <span class="keywordflow">for</span> (<span class="keyword">auto</span> *p : digiHits) {</div>
<div class="line"><span class="lineno">  139</span>      <span class="keyword">auto</span> *hit = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="classsndScifiHit.html">sndScifiHit</a> *<span class="keyword">&gt;</span>(p);</div>
<div class="line"><span class="lineno">  140</span>      <span class="keywordflow">if</span> (!<a class="code hl_function" href="sndSciFiTools_8cxx.html#a1fd0777019d2b6e914490ff374f2f922">validateHit</a>(hit, refStation, refOrientation)) {</div>
<div class="line"><span class="lineno">  141</span>         <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  142</span>      }</div>
<div class="line"><span class="lineno">  143</span>      hitTime = hit-&gt;<a class="code hl_function" href="classSndlhcHit.html#a866527b9119beb9fa2900cca74418ba1">GetTime</a>() * 1E9 / (ShipUnit::snd_freq / ShipUnit::hertz);</div>
<div class="line"><span class="lineno">  144</span>      <span class="keywordflow">if</span> (hitTime &lt; min_x || hitTime &gt; max_x) {</div>
<div class="line"><span class="lineno">  145</span>         <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  146</span>      }</div>
<div class="line"><span class="lineno">  147</span>      ScifiTiming.Fill(hitTime);</div>
<div class="line"><span class="lineno">  148</span>      hitTime = -1.0;</div>
<div class="line"><span class="lineno">  149</span>   }</div>
<div class="line"><span class="lineno">  150</span> </div>
<div class="line"><span class="lineno">  151</span>   <span class="keywordtype">float</span> peakTiming = (ScifiTiming.GetMaximumBin() - 0.5) * (max_x - min_x) / <a class="code hl_variable" href="namespaceTTCluster.html#a65472a05de0b21cb4f6d667745454235">bins</a> + min_x;</div>
<div class="line"><span class="lineno">  152</span> </div>
<div class="line"><span class="lineno">  153</span>   <span class="keywordflow">return</span> peakTiming;</div>
<div class="line"><span class="lineno">  154</span>}</div>
<div class="ttc" id="aclassSndlhcHit_html_a866527b9119beb9fa2900cca74418ba1"><div class="ttname"><a href="classSndlhcHit.html#a866527b9119beb9fa2900cca74418ba1">SndlhcHit::GetTime</a></div><div class="ttdeci">Float_t GetTime(Int_t nChannel=0)</div><div class="ttdef"><b>Definition</b> <a href="SndlhcHit_8cxx_source.html#l00032">SndlhcHit.cxx:32</a></div></div>
<div class="ttc" id="anamespaceTTCluster_html_a65472a05de0b21cb4f6d667745454235"><div class="ttname"><a href="namespaceTTCluster.html#a65472a05de0b21cb4f6d667745454235">TTCluster.bins</a></div><div class="ttdeci">bins</div><div class="ttdef"><b>Definition</b> <a href="TTCluster_8py_source.html#l00731">TTCluster.py:731</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeca7f1eae2a9e2ff5c2aabf1319c954a" name="aeca7f1eae2a9e2ff5c2aabf1319c954a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeca7f1eae2a9e2ff5c2aabf1319c954a">&#9670;&#160;</a></span>selectScifiHits() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt; TClonesArray &gt; snd::analysis_tools::selectScifiHits </td>
          <td>(</td>
          <td class="paramtype">const TClonesArray &amp;&#160;</td>
          <td class="paramname"><em>digiHits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>station</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>orientation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; std::string, float &gt; &amp;&#160;</td>
          <td class="paramname"><em>selection_parameters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>make_selection</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sndSciFiTools_8cxx_source.html#l00259">259</a> of file <a class="el" href="sndSciFiTools_8cxx_source.html">sndSciFiTools.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  261</span>{</div>
<div class="line"><span class="lineno">  262</span> </div>
<div class="line"><span class="lineno">  263</span>   <span class="keywordflow">if</span> ((selection_parameters.find(<span class="stringliteral">&quot;bins_x&quot;</span>) == selection_parameters.end()) ||</div>
<div class="line"><span class="lineno">  264</span>       (selection_parameters.find(<span class="stringliteral">&quot;min_x&quot;</span>) == selection_parameters.end()) ||</div>
<div class="line"><span class="lineno">  265</span>       (selection_parameters.find(<span class="stringliteral">&quot;max_x&quot;</span>) == selection_parameters.end()) ||</div>
<div class="line"><span class="lineno">  266</span>       (selection_parameters.find(<span class="stringliteral">&quot;time_lower_range&quot;</span>) == selection_parameters.end())) {</div>
<div class="line"><span class="lineno">  267</span>      LOG(FATAL) &lt;&lt; <span class="stringliteral">&quot;In order to use method 0 please provide the correct selection_parameters. Consider the default = &quot;</span></div>
<div class="line"><span class="lineno">  268</span>                    <span class="stringliteral">&quot;{{\&quot;bins_x\&quot;, 52.}, {\&quot;min_x\&quot;, 0.}, {\&quot;max_x\&quot;, 26.}, {\&quot;time_lower_range\&quot;, &quot;</span></div>
<div class="line"><span class="lineno">  269</span>                    <span class="stringliteral">&quot;1E9/(2*ShipUnit::snd_freq/ShipUnit::hertz))}, {\&quot;time_upper_range\&quot;, &quot;</span></div>
<div class="line"><span class="lineno">  270</span>                    <span class="stringliteral">&quot;2E9/(ShipUnit::snd_freq/ShipUnit::hertz)}}&quot;</span>;</div>
<div class="line"><span class="lineno">  271</span>   }</div>
<div class="line"><span class="lineno">  272</span> </div>
<div class="line"><span class="lineno">  273</span>   <span class="keywordtype">float</span> time_upper_range = -1.;</div>
<div class="line"><span class="lineno">  274</span> </div>
<div class="line"><span class="lineno">  275</span>   <span class="keywordflow">if</span> (selection_parameters.find(<span class="stringliteral">&quot;time_upper_range&quot;</span>) == selection_parameters.end()) {</div>
<div class="line"><span class="lineno">  276</span>      time_upper_range = selection_parameters.at(<span class="stringliteral">&quot;time_lower_range&quot;</span>);</div>
<div class="line"><span class="lineno">  277</span>   } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  278</span>      time_upper_range = selection_parameters.at(<span class="stringliteral">&quot;time_upper_range&quot;</span>);</div>
<div class="line"><span class="lineno">  279</span>   }</div>
<div class="line"><span class="lineno">  280</span> </div>
<div class="line"><span class="lineno">  281</span>   <span class="keywordflow">return</span> <a class="code hl_function" href="namespacesnd_1_1analysis__tools.html#aeb14e67896089cd76dae5e5131de402e">selectScifiHits</a>(digiHits, station, orientation, <span class="keywordtype">int</span>(selection_parameters.at(<span class="stringliteral">&quot;bins_x&quot;</span>)),</div>
<div class="line"><span class="lineno">  282</span>                          selection_parameters.at(<span class="stringliteral">&quot;min_x&quot;</span>), selection_parameters.at(<span class="stringliteral">&quot;max_x&quot;</span>),</div>
<div class="line"><span class="lineno">  283</span>                          selection_parameters.at(<span class="stringliteral">&quot;time_lower_range&quot;</span>), time_upper_range, make_selection);</div>
<div class="line"><span class="lineno">  284</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aeb14e67896089cd76dae5e5131de402e" name="aeb14e67896089cd76dae5e5131de402e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb14e67896089cd76dae5e5131de402e">&#9670;&#160;</a></span>selectScifiHits() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt; TClonesArray &gt; snd::analysis_tools::selectScifiHits </td>
          <td>(</td>
          <td class="paramtype">const TClonesArray &amp;&#160;</td>
          <td class="paramname"><em>digiHits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>station</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>orientation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bins_x</em> = <code>52</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>min_x</em> = <code>0.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>max_x</em> = <code>26.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>time_lower_range</em> = <code>1E9/(2*ShipUnit::snd_freq)</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>time_upper_range</em> = <code>2E9/(ShipUnit::snd_freq/ShipUnit::hertz)</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>make_selection</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sndSciFiTools_8cxx_source.html#l00182">182</a> of file <a class="el" href="sndSciFiTools_8cxx_source.html">sndSciFiTools.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  186</span>{</div>
<div class="line"><span class="lineno">  187</span> </div>
<div class="line"><span class="lineno">  188</span>   <span class="keywordflow">if</span> (bins_x &lt; 1) {</div>
<div class="line"><span class="lineno">  189</span>      LOG(FATAL) &lt;&lt; <span class="stringliteral">&quot;bins_x in selection_parameters cannot be &lt;1. Consider using the default value of 52 instead.&quot;</span>;</div>
<div class="line"><span class="lineno">  190</span>   }</div>
<div class="line"><span class="lineno">  191</span>   <span class="keywordflow">if</span> (min_x &gt; max_x) {</div>
<div class="line"><span class="lineno">  192</span>      LOG(warning) &lt;&lt; <span class="stringliteral">&quot;In selection_parameters min_x &gt; max_x. Values will be swapped.&quot;</span>;</div>
<div class="line"><span class="lineno">  193</span>      <span class="keywordtype">float</span> aux_float = min_x;</div>
<div class="line"><span class="lineno">  194</span>      min_x = max_x;</div>
<div class="line"><span class="lineno">  195</span>      max_x = aux_float;</div>
<div class="line"><span class="lineno">  196</span>   }</div>
<div class="line"><span class="lineno">  197</span>   <span class="keywordflow">if</span> (min_x &lt; 0.0) {</div>
<div class="line"><span class="lineno">  198</span>      LOG(warning) &lt;&lt; <span class="stringliteral">&quot;In selection_parameters min_x &lt; 0.0. Consider using the default value of 0.0.&quot;</span>;</div>
<div class="line"><span class="lineno">  199</span>   }</div>
<div class="line"><span class="lineno">  200</span>   <span class="keywordflow">if</span> (max_x &lt; 0.0) {</div>
<div class="line"><span class="lineno">  201</span>      LOG(FATAL) &lt;&lt; <span class="stringliteral">&quot;In selection_parameters max_x &lt; 0.0. Consider using the default value of 26.0.&quot;</span>;</div>
<div class="line"><span class="lineno">  202</span>   }</div>
<div class="line"><span class="lineno">  203</span>   <span class="keywordflow">if</span> (time_lower_range &lt;= 0.0) {</div>
<div class="line"><span class="lineno">  204</span>      LOG(FATAL) &lt;&lt; <span class="stringliteral">&quot;In selection_parameters time_lower_range &lt;= 0.0. Value should always be positive, in ns.&quot;</span>;</div>
<div class="line"><span class="lineno">  205</span>   }</div>
<div class="line"><span class="lineno">  206</span>   <span class="keywordflow">if</span> (time_upper_range &lt;= 0.0) {</div>
<div class="line"><span class="lineno">  207</span>      LOG(FATAL) &lt;&lt; <span class="stringliteral">&quot;In selection_parameters time_upper_range &lt;= 0.0. Value should always be positive, in ns.&quot;</span>;</div>
<div class="line"><span class="lineno">  208</span>   }</div>
<div class="line"><span class="lineno">  209</span> </div>
<div class="line"><span class="lineno">  210</span>   <span class="keyword">auto</span> filteredHits = std::make_unique&lt;TClonesArray&gt;(<span class="stringliteral">&quot;sndScifiHit&quot;</span>, digiHits.GetEntries());</div>
<div class="line"><span class="lineno">  211</span> </div>
<div class="line"><span class="lineno">  212</span>   <span class="keywordtype">float</span> peakTiming = -1.0;</div>
<div class="line"><span class="lineno">  213</span> </div>
<div class="line"><span class="lineno">  214</span>   <span class="keywordflow">if</span> (make_selection) {</div>
<div class="line"><span class="lineno">  215</span> </div>
<div class="line"><span class="lineno">  216</span>      <span class="keyword">auto</span> selectedHits = <a class="code hl_function" href="namespacesnd_1_1analysis__tools.html#a898b9cbb7bac8c95c59069b6aecbe9b3">getScifiHits</a>(digiHits, station, orientation);</div>
<div class="line"><span class="lineno">  217</span> </div>
<div class="line"><span class="lineno">  218</span>      peakTiming = <a class="code hl_function" href="namespacesnd_1_1analysis__tools.html#a5159d7eeb2993eba4f46fcd69f625612">peakScifiTiming</a>(*selectedHits, bins_x, min_x, max_x);</div>
<div class="line"><span class="lineno">  219</span> </div>
<div class="line"><span class="lineno">  220</span>      <span class="keywordtype">int</span> <a class="code hl_variable" href="namespaceShipAna.html#aa4bf87f4d17f9d38b1d8f4d009bb54b3">i</a> = 0;</div>
<div class="line"><span class="lineno">  221</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> *p : *selectedHits) {</div>
<div class="line"><span class="lineno">  222</span>         <span class="keyword">auto</span> *hit = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="classsndScifiHit.html">sndScifiHit</a> *<span class="keyword">&gt;</span>(<a class="code hl_variable" href="namespaceconditionsDatabase_1_1demo_1_1drifttubeMonitoring.html#a1c800df226d66062268fa28c3e0c7f7a">p</a>);</div>
<div class="line"><span class="lineno">  223</span>         <span class="keywordflow">if</span> (!<a class="code hl_function" href="sndSciFiTools_8cxx.html#a1fd0777019d2b6e914490ff374f2f922">validateHit</a>(hit, station, orientation)) {</div>
<div class="line"><span class="lineno">  224</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  225</span>         }</div>
<div class="line"><span class="lineno">  226</span>         <span class="keywordflow">if</span> ((peakTiming - time_lower_range &gt; hit-&gt;GetTime() * 1E9 / (ShipUnit::snd_freq / ShipUnit::hertz)) ||</div>
<div class="line"><span class="lineno">  227</span>             (hit-&gt;GetTime() * 1E9 / (ShipUnit::snd_freq / ShipUnit::hertz) &gt; peakTiming + time_upper_range)) {</div>
<div class="line"><span class="lineno">  228</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  229</span>         }</div>
<div class="line"><span class="lineno">  230</span>         <span class="keyword">new</span> ((*filteredHits)[<a class="code hl_variable" href="namespaceShipAna.html#aa4bf87f4d17f9d38b1d8f4d009bb54b3">i</a>++]) <a class="code hl_class" href="classsndScifiHit.html">sndScifiHit</a>(*hit);</div>
<div class="line"><span class="lineno">  231</span>      }</div>
<div class="line"><span class="lineno">  232</span> </div>
<div class="line"><span class="lineno">  233</span>   } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  234</span>      <span class="comment">// Does not create selectedHits and just uses digiHits (not unique_ptr)</span></div>
<div class="line"><span class="lineno">  235</span> </div>
<div class="line"><span class="lineno">  236</span>      peakTiming = <a class="code hl_function" href="namespacesnd_1_1analysis__tools.html#a5159d7eeb2993eba4f46fcd69f625612">peakScifiTiming</a>(digiHits, bins_x, min_x, max_x);</div>
<div class="line"><span class="lineno">  237</span> </div>
<div class="line"><span class="lineno">  238</span>      <span class="keywordtype">int</span> <a class="code hl_variable" href="namespaceShipAna.html#aa4bf87f4d17f9d38b1d8f4d009bb54b3">i</a> = 0;</div>
<div class="line"><span class="lineno">  239</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> *p : digiHits) {</div>
<div class="line"><span class="lineno">  240</span>         <span class="keyword">auto</span> *hit = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="classsndScifiHit.html">sndScifiHit</a> *<span class="keyword">&gt;</span>(<a class="code hl_variable" href="namespaceconditionsDatabase_1_1demo_1_1drifttubeMonitoring.html#a1c800df226d66062268fa28c3e0c7f7a">p</a>);</div>
<div class="line"><span class="lineno">  241</span>         <span class="keywordflow">if</span> (!<a class="code hl_function" href="sndSciFiTools_8cxx.html#a1fd0777019d2b6e914490ff374f2f922">validateHit</a>(hit, station, orientation)) {</div>
<div class="line"><span class="lineno">  242</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  243</span>         }</div>
<div class="line"><span class="lineno">  244</span>         <span class="keywordflow">if</span> ((peakTiming - time_lower_range &gt; hit-&gt;GetTime() * 1E9 / (ShipUnit::snd_freq / ShipUnit::hertz)) ||</div>
<div class="line"><span class="lineno">  245</span>             (hit-&gt;GetTime() * 1E9 / (ShipUnit::snd_freq / ShipUnit::hertz) &gt; peakTiming + time_upper_range)) {</div>
<div class="line"><span class="lineno">  246</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  247</span>         }</div>
<div class="line"><span class="lineno">  248</span>         <span class="keyword">new</span> ((*filteredHits)[<a class="code hl_variable" href="namespaceShipAna.html#aa4bf87f4d17f9d38b1d8f4d009bb54b3">i</a>++]) <a class="code hl_class" href="classsndScifiHit.html">sndScifiHit</a>(*hit);</div>
<div class="line"><span class="lineno">  249</span>      }</div>
<div class="line"><span class="lineno">  250</span>   }</div>
<div class="line"><span class="lineno">  251</span> </div>
<div class="line"><span class="lineno">  252</span>   <span class="keywordflow">return</span> filteredHits;</div>
<div class="line"><span class="lineno">  253</span>}</div>
<div class="ttc" id="anamespacesnd_1_1analysis__tools_html_a5159d7eeb2993eba4f46fcd69f625612"><div class="ttname"><a href="namespacesnd_1_1analysis__tools.html#a5159d7eeb2993eba4f46fcd69f625612">snd::analysis_tools::peakScifiTiming</a></div><div class="ttdeci">float peakScifiTiming(const TClonesArray &amp;digiHits, int bins, float min_x, float max_x)</div><div class="ttdef"><b>Definition</b> <a href="sndSciFiTools_8cxx_source.html#l00124">sndSciFiTools.cxx:124</a></div></div>
<div class="ttc" id="anamespacesnd_1_1analysis__tools_html_a898b9cbb7bac8c95c59069b6aecbe9b3"><div class="ttname"><a href="namespacesnd_1_1analysis__tools.html#a898b9cbb7bac8c95c59069b6aecbe9b3">snd::analysis_tools::getScifiHits</a></div><div class="ttdeci">std::unique_ptr&lt; TClonesArray &gt; getScifiHits(const TClonesArray &amp;digiHits, int station, bool orientation)</div><div class="ttdef"><b>Definition</b> <a href="sndSciFiTools_8cxx_source.html#l00158">sndSciFiTools.cxx:158</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3efcc7ce16eb9a30afcdcedd2c4f4ac2" name="a3efcc7ce16eb9a30afcdcedd2c4f4ac2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3efcc7ce16eb9a30afcdcedd2c4f4ac2">&#9670;&#160;</a></span>showerInteractionWall() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int snd::analysis_tools::showerInteractionWall </td>
          <td>(</td>
          <td class="paramtype">const TClonesArray &amp;&#160;</td>
          <td class="paramname"><em>digiHits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; std::string, float &gt; &amp;&#160;</td>
          <td class="paramname"><em>selection_parameters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>method</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>setup</em> = <code>&quot;TI18&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sndSciFiTools_8cxx_source.html#l00476">476</a> of file <a class="el" href="sndSciFiTools_8cxx_source.html">sndSciFiTools.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  479</span>{</div>
<div class="line"><span class="lineno">  480</span> </div>
<div class="line"><span class="lineno">  481</span>   <span class="keywordtype">int</span> totalScifiStations = 5;</div>
<div class="line"><span class="lineno">  482</span>   <span class="keywordflow">if</span> (setup == <span class="stringliteral">&quot;H8&quot;</span>) {</div>
<div class="line"><span class="lineno">  483</span>      totalScifiStations = 4;</div>
<div class="line"><span class="lineno">  484</span>   } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  485</span>      LOG(info) &lt;&lt; <span class="stringliteral">&quot;\&quot;TI18\&quot; setup will be used by default, please provide \&quot;H8\&quot; for the Testbeam setup.&quot;</span>;</div>
<div class="line"><span class="lineno">  486</span>   }</div>
<div class="line"><span class="lineno">  487</span> </div>
<div class="line"><span class="lineno">  488</span>   <span class="comment">// There is always 1 more Scifi Station than a target block. As such, showerStart == totalScifiStations</span></div>
<div class="line"><span class="lineno">  489</span>   <span class="comment">// means that the shower did not start developing in the target, before the last Scifi Station</span></div>
<div class="line"><span class="lineno">  490</span>   <span class="keywordtype">int</span> showerStart = totalScifiStations;</div>
<div class="line"><span class="lineno">  491</span> </div>
<div class="line"><span class="lineno">  492</span>   <span class="keywordflow">if</span> (method == 0) {</div>
<div class="line"><span class="lineno">  493</span> </div>
<div class="line"><span class="lineno">  494</span>      <span class="keywordflow">if</span> ((selection_parameters.find(<span class="stringliteral">&quot;radius&quot;</span>) == selection_parameters.end()) ||</div>
<div class="line"><span class="lineno">  495</span>          (selection_parameters.find(<span class="stringliteral">&quot;min_hit_density&quot;</span>) == selection_parameters.end())) {</div>
<div class="line"><span class="lineno">  496</span>         LOG(FATAL)</div>
<div class="line"><span class="lineno">  497</span>            &lt;&lt; <span class="stringliteral">&quot;Argument of select_parameters is incorrect. Please provide a map with the arguments \&quot;radius\&quot; and &quot;</span></div>
<div class="line"><span class="lineno">  498</span>               <span class="stringliteral">&quot;\&quot;min_hit_density\&quot;. Consider using the default values of {{\&quot;radius\&quot;,64}, {\&quot;min_hit_density\&quot;,36}}.&quot;</span>;</div>
<div class="line"><span class="lineno">  499</span>      }</div>
<div class="line"><span class="lineno">  500</span> </div>
<div class="line"><span class="lineno">  501</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> scifiStation = 1; scifiStation &lt;= totalScifiStations; scifiStation++) {</div>
<div class="line"><span class="lineno">  502</span> </div>
<div class="line"><span class="lineno">  503</span>         <span class="comment">// For each ScifiStation we check whether we see clusters with the desired parameters</span></div>
<div class="line"><span class="lineno">  504</span>         <span class="comment">// By default, we require passing the check on both the horizontal and vertical mats</span></div>
<div class="line"><span class="lineno">  505</span>         <span class="comment">// In case selection_parameters[&quot;orientation&quot;] was provided, we set the NOT CHOSEN orientation</span></div>
<div class="line"><span class="lineno">  506</span>         <span class="comment">// as true by default, so as to only need to pass the chosen orientation check</span></div>
<div class="line"><span class="lineno">  507</span>         <span class="keywordtype">bool</span> horizontalCheck = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  508</span>         <span class="keywordtype">bool</span> verticalCheck = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  509</span>         <span class="keywordflow">if</span> (selection_parameters.find(<span class="stringliteral">&quot;orientation&quot;</span>) != selection_parameters.end()) {</div>
<div class="line"><span class="lineno">  510</span>            <span class="keywordflow">if</span> (<span class="keywordtype">int</span>(selection_parameters.at(<span class="stringliteral">&quot;orientation&quot;</span>)) == 0) {</div>
<div class="line"><span class="lineno">  511</span>               verticalCheck = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  512</span>            }</div>
<div class="line"><span class="lineno">  513</span>            <span class="keywordflow">if</span> (<span class="keywordtype">int</span>(selection_parameters.at(<span class="stringliteral">&quot;orientation&quot;</span>)) == 1) {</div>
<div class="line"><span class="lineno">  514</span>               horizontalCheck = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  515</span>            }</div>
<div class="line"><span class="lineno">  516</span>         }</div>
<div class="line"><span class="lineno">  517</span>         horizontalCheck = (<a class="code hl_function" href="namespacesnd_1_1analysis__tools.html#aa6dd4352f5c110708f8070ad1c88a907">densityCheck</a>(digiHits, <span class="keywordtype">int</span>(selection_parameters.at(<span class="stringliteral">&quot;radius&quot;</span>)),</div>
<div class="line"><span class="lineno">  518</span>                                         <span class="keywordtype">int</span>(selection_parameters.at(<span class="stringliteral">&quot;min_hit_density&quot;</span>)), scifiStation, <span class="keyword">false</span>) ||</div>
<div class="line"><span class="lineno">  519</span>                            horizontalCheck);</div>
<div class="line"><span class="lineno">  520</span>         verticalCheck = (<a class="code hl_function" href="namespacesnd_1_1analysis__tools.html#aa6dd4352f5c110708f8070ad1c88a907">densityCheck</a>(digiHits, <span class="keywordtype">int</span>(selection_parameters.at(<span class="stringliteral">&quot;radius&quot;</span>)),</div>
<div class="line"><span class="lineno">  521</span>                                       <span class="keywordtype">int</span>(selection_parameters.at(<span class="stringliteral">&quot;min_hit_density&quot;</span>)), scifiStation, <span class="keyword">true</span>) ||</div>
<div class="line"><span class="lineno">  522</span>                          verticalCheck);</div>
<div class="line"><span class="lineno">  523</span>         <span class="keywordflow">if</span> ((horizontalCheck) &amp;&amp; (verticalCheck)) {</div>
<div class="line"><span class="lineno">  524</span>            showerStart = scifiStation - 1;</div>
<div class="line"><span class="lineno">  525</span>            <span class="keywordflow">return</span> showerStart;</div>
<div class="line"><span class="lineno">  526</span>         }</div>
<div class="line"><span class="lineno">  527</span>      }</div>
<div class="line"><span class="lineno">  528</span>   }</div>
<div class="line"><span class="lineno">  529</span> </div>
<div class="line"><span class="lineno">  530</span>   <span class="keywordflow">return</span> showerStart;</div>
<div class="line"><span class="lineno">  531</span>}</div>
<div class="ttc" id="anamespacesnd_1_1analysis__tools_html_aa6dd4352f5c110708f8070ad1c88a907"><div class="ttname"><a href="namespacesnd_1_1analysis__tools.html#aa6dd4352f5c110708f8070ad1c88a907">snd::analysis_tools::densityCheck</a></div><div class="ttdeci">bool densityCheck(const TClonesArray &amp;digiHits, int radius=64, int min_hit_density=36, int station=1, bool orientation=false)</div><div class="ttdef"><b>Definition</b> <a href="sndSciFiTools_8cxx_source.html#l00413">sndSciFiTools.cxx:413</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a78b08ea6c3c2d141709d92390c1f87b8" name="a78b08ea6c3c2d141709d92390c1f87b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78b08ea6c3c2d141709d92390c1f87b8">&#9670;&#160;</a></span>showerInteractionWall() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int snd::analysis_tools::showerInteractionWall </td>
          <td>(</td>
          <td class="paramtype">const TClonesArray &amp;&#160;</td>
          <td class="paramname"><em>digiHits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>method</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>setup</em> = <code>&quot;TI18&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sndSciFiTools_8cxx_source.html#l00533">533</a> of file <a class="el" href="sndSciFiTools_8cxx_source.html">sndSciFiTools.cxx</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  534</span>{</div>
<div class="line"><span class="lineno">  535</span> </div>
<div class="line"><span class="lineno">  536</span>   <span class="keywordflow">if</span> (method != 0) {</div>
<div class="line"><span class="lineno">  537</span>      LOG(FATAL) &lt;&lt; <span class="stringliteral">&quot;Please use method=0. No other methods implemented so far.&quot;</span>;</div>
<div class="line"><span class="lineno">  538</span>   }</div>
<div class="line"><span class="lineno">  539</span> </div>
<div class="line"><span class="lineno">  540</span>   std::map&lt;std::string, float&gt; selection_parameters = {{<span class="stringliteral">&quot;radius&quot;</span>, 64.}, {<span class="stringliteral">&quot;min_hit_density&quot;</span>, 36.}};</div>
<div class="line"><span class="lineno">  541</span> </div>
<div class="line"><span class="lineno">  542</span>   <span class="keywordflow">return</span> <a class="code hl_function" href="namespacesnd_1_1analysis__tools.html#a3efcc7ce16eb9a30afcdcedd2c4f4ac2">showerInteractionWall</a>(digiHits, selection_parameters, method, setup);</div>
<div class="line"><span class="lineno">  543</span>}</div>
<div class="ttc" id="anamespacesnd_1_1analysis__tools_html_a3efcc7ce16eb9a30afcdcedd2c4f4ac2"><div class="ttname"><a href="namespacesnd_1_1analysis__tools.html#a3efcc7ce16eb9a30afcdcedd2c4f4ac2">snd::analysis_tools::showerInteractionWall</a></div><div class="ttdeci">int showerInteractionWall(const TClonesArray &amp;digiHits, const std::map&lt; std::string, float &gt; &amp;selection_parameters, int method=0, std::string setup=&quot;TI18&quot;)</div><div class="ttdef"><b>Definition</b> <a href="sndSciFiTools_8cxx_source.html#l00476">sndSciFiTools.cxx:476</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacesnd.html">snd</a></li><li class="navelem"><a class="el" href="namespacesnd_1_1analysis__tools.html">analysis_tools</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
