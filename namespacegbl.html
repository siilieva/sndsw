<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SND Software: gbl Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SND Software
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('namespacegbl.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a>  </div>
  <div class="headertitle">
<div class="title">gbl Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Namespace for the general broken lines package.  
<a href="namespacegbl.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgbl_1_1BorderedBandMatrix.html">BorderedBandMatrix</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">(Symmetric) Bordered Band Matrix.  <a href="classgbl_1_1BorderedBandMatrix.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgbl_1_1GblData.html">GblData</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data (block) for independent scalar measurement.  <a href="classgbl_1_1GblData.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgbl_1_1GblPoint.html">GblPoint</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Point on trajectory.  <a href="classgbl_1_1GblPoint.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgbl_1_1GblTrajectory.html">GblTrajectory</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">GBL trajectory.  <a href="classgbl_1_1GblTrajectory.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgbl_1_1MilleBinary.html">MilleBinary</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Millepede-II (binary) record.  <a href="classgbl_1_1MilleBinary.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgbl_1_1VMatrix.html">VMatrix</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simple Matrix based on std::vector&lt;double&gt;  <a href="classgbl_1_1VMatrix.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgbl_1_1VSymMatrix.html">VSymMatrix</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simple symmetric Matrix based on std::vector&lt;double&gt;  <a href="classgbl_1_1VSymMatrix.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgbl_1_1VVector.html">VVector</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simple Vector based on std::vector&lt;double&gt;  <a href="classgbl_1_1VVector.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Namespace for the general broken lines package. </p>
<p>General information</p>
<p>Introduction</p>
<p>For a track with an initial trajectory from a prefit of the measurements (internal seed) or an external prediction (external seed) the description of multiple scattering is added by offsets in a local system. Along the initial trajectory points are defined with can describe a measurement or a (thin) scatterer or both. Measurements are arbitrary functions of the local track parameters at a point (e.g. 2D: position, 4D: direction+position). The refit provides corrections to the local track parameters (in the local system) and the corresponding covariance matrix at any of those points. Non-diagonal covariance matrices will be diagonalized internally. Outliers can be down-weighted by use of M-estimators.</p>
<p>The broken lines trajectory is defined by (2D) offsets at the first and last point and all points with a scatterer. The prediction for a measurement is obtained by interpolation of the enclosing offsets and for triplets of adjacent offsets kink angles are determined. This requires for all points the jacobians for propagation to the previous and next offset. These are calculated from the point-to-point jacobians along the initial trajectory. The sequence of points has to be strictly monotonic in arc-length.</p>
<p>Additional local or global parameters can be added and the trajectories can be written to special binary files for calibration and alignment with Millepede-II. (V. Blobel, NIM A, 566 (2006), pp. 5-13).</p>
<p>Besides simple trajectories describing the path of a single particle composed trajectories are supported. These are constructed from the trajectories of multiple particles and some external parameters (like those describing a decay) and transformations at the first points from the external to the local track parameters.</p>
<p>The conventions for the coordinate systems follow: Derivation of Jacobians for the propagation of covariance matrices of track parameters in homogeneous magnetic fields A. Strandlie, W. Wittek, NIM A, 566 (2006) 687-698.</p>
<p>Calling sequence</p>
<ol type="1">
<li>Create list of points on initial trajectory:<br  />
 <code>std::vector&lt;GblPoint&gt; list</code></li>
<li>For all points on initial trajectory:<ul>
<li>Create points and add appropriate attributes:<br  />
<ul>
<li><code>point = <a class="el" href="classgbl_1_1GblPoint.html" title="Point on trajectory.">gbl::GblPoint</a>(..)</code></li>
<li><code>point.addMeasurement(..)</code></li>
<li>Add additional local or global parameters to measurement:<br  />
<ul>
<li><code>point.addLocals(..)</code></li>
<li><code>point.addGlobals(..)</code></li>
</ul>
</li>
<li><code>point.addScatterer(..)</code></li>
</ul>
</li>
<li>Add point (ordered by arc length) to list:<br  />
 <code>list.push_back(point)</code></li>
</ul>
</li>
<li>Create (simple) trajectory from list of points:<br  />
 <code>traj = <a class="el" href="classgbl_1_1GblTrajectory.html" title="GBL trajectory.">gbl::GblTrajectory</a> (list)</code></li>
<li>Optionally with external seed:<br  />
 <code>traj = <a class="el" href="classgbl_1_1GblTrajectory.html" title="GBL trajectory.">gbl::GblTrajectory</a> (list,seed)</code></li>
<li>Optionally check validity of trajectory:<br  />
 <code>if (not traj.isValid()) .. //abort</code></li>
<li>Fit trajectory, return error code, get Chi2, Ndf (and weight lost by M-estimators):<br  />
 <code>ierr = traj.fit(..)</code></li>
<li>For any point on initial trajectory:<ul>
<li>Get corrections and covariance matrix for track parameters:<br  />
 <code>[..] = traj.getResults(label)</code></li>
</ul>
</li>
<li>Optionally write trajectory to MP binary file (doesn't needs to be fitted):<br  />
 <code>traj.milleOut(..)</code></li>
</ol>
<p>Local system and local parameters At each point on the trajectory a local coordinate system with local track parameters has to be defined. The first of the five parameters describes the bending, the next two the direction and the last two the position (offsets). The curvilinear system (T,U,V) with parameters (q/p, lambda, phi, x_t, y_t) is well suited.</p>
<p>Implementation</p>
<p>Matrices are implemented with ROOT (root.cern.ch). User input or output is in the form of TMatrices. Internally SMatrices are used for fixes sized and simple matrices based on std::vector&lt;&gt; for variable sized matrices.</p>
<p>References</p><ul>
<li>V. Blobel, C. Kleinwort, F. Meier, Fast alignment of a complex tracking detector using advanced track models, Computer Phys. Communications (2011), doi:10.1016/j.cpc.2011.03.017</li>
<li>C. Kleinwort, General Broken Lines as advanced track fitting method, NIM A, 673 (2012), 107-110, doi:10.1016/j.nima.2012.01.024 </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacegbl.html">gbl</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
